--disable_query_log
set @@session.explicit_defaults_for_timestamp=off;
--enable_query_log
--enable_abort_on_error
--echo ================ expression convert_tz ================

# 直接时刻类型
SELECT CONVERT_TZ('2021-01-01 12:00:00','+00:00','+08:00');
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+08:00');
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+06:30');
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:00','+10:10');
SELECT CONVERT_TZ('2021-01-01 12:00:00','+01:30','+13:00');
SELECT CONVERT_TZ('2021-01-01 12:00:00','-11:30','+13:00');
SELECT CONVERT_TZ('2021-01-01 12:00:00','-12:00','+13:00');
SELECT CONVERT_TZ('2021-01-01 00:00:00','-12:00','+13:00');
SELECT CONVERT_TZ('2021-01-01 23:59:59','-12:00','+13:00');
SELECT CONVERT_TZ('2021-01-01 13:19:38','-10:38','+10:12');
SELECT CONVERT_TZ('2021-01-01 12:23:35','-09:23','-11:11');
SELECT CONVERT_TZ('2021-01-01 00:01:00','+10:00','-11:00');
SELECT CONVERT_TZ('2021-01-01 00:11:00','+00:00','-11:00');
SELECT CONVERT_TZ('2021-03-01 00:11:00','+00:00','-11:00');
SELECT CONVERT_TZ('2021-06-01 00:11:00','+00:00','-11:00');
SELECT CONVERT_TZ('2020-03-01 00:11:00','+00:00','-11:00');
SELECT CONVERT_TZ('2020-02-28 23:11:00','-00:00','+11:00');
SELECT CONVERT_TZ('2020-12-31 23:11:00','-05:00','+11:00');

#直接时刻类型异常
SELECT CONVERT_TZ('2020-12-31 23:11:00',null,'+11:00');
SELECT CONVERT_TZ('2020-12-31 23:11:00','+11:00', null);
SELECT CONVERT_TZ(null,'-13:00','+11:00');
SELECT CONVERT_TZ(null, null,'+11:00');
SELECT CONVERT_TZ(null, null, null);

#时区类型
SELECT CONVERT_TZ('2020-12-31 23:11:00','America/Merida','Asia/Tokyo');
SELECT CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Australia/Darwin');
SELECT CONVERT_TZ('2021-01-01 00:11:00','America/Merida','Europe/Amsterdam');
SELECT CONVERT_TZ('2021-01-01 07:11:00','Europe/Amsterdam','America/Merida');
SELECT CONVERT_TZ('2021-01-01 07:11:00','MET','Libya');
SELECT CONVERT_TZ('2021-01-01 07:11:00','MET','MST');
SELECT CONVERT_TZ('2021-01-01 07:11:00','PRC','MST');
SELECT CONVERT_TZ('2021-01-01 07:11:00','PRC','ROC');
SELECT CONVERT_TZ('2021-01-01 07:11:00','UCT','ROC');
SELECT CONVERT_TZ('2021-01-01 07:11:00','Universal','ROC');
SELECT CONVERT_TZ('2021-01-01 07:11:00','Pacific/Marquesas','ROC');
SELECT CONVERT_TZ('2021-02-28 17:11:00','GMT+0','ROC');
SELECT CONVERT_TZ('2021-02-28 17:11:00','GMT+0','Singapore');
SELECT CONVERT_TZ('2021-02-28 17:11:00','US/Michigan','ROC');

#时区类型异常
SELECT CONVERT_TZ('2021-02-28 17:11:00', null,'ROC');
SELECT CONVERT_TZ('2021-02-28 17:11:00','US/Michigan', null);
SELECT CONVERT_TZ('2021-02-28 17:11:00', null, null);

#混合类型
SELECT CONVERT_TZ('2021-02-28 17:11:00', '+00:00','ROC');
SELECT CONVERT_TZ('2021-02-28 17:11:00', '+00:00','US/Michigan');
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+00:00');
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'US/Michigan', '+00:00');
SELECT CONVERT_TZ('2021-02-28 17:11:00', 'ROC','+12:58');
SELECT CONVERT_TZ('2021-01-01 07:11:00', 'UCT','-12:58');
SELECT CONVERT_TZ('2021-01-01 07:11:00', '-12:58','UCT');
SELECT CONVERT_TZ('2021-01-01 07:11:00', '-12:58','US/Michigan');
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+05:12','MET');
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+03:32','PRC');
SELECT CONVERT_TZ('2021-01-01 07:11:00', '+11:32','PRC');